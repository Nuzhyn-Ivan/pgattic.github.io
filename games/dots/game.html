<!DOCTYPE html>
<html>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114106362-3"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-114106362-3');
	</script>
	<link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
	<title>Dots | SaveState's Web Games</title>
	<meta name="robots" content="noindex">
	<meta name="author" content="Preston Corless, SaveState">
	<style>*{margin:0}canvas{display:block}
	p{
		margin: 0;
		font-family:arial;
		position: absolute;
		font-size:16px;
		user-select: none;
	}
	#s{
		top:16px;
		left:20px;
	}
	#p{
		top: 50%;
		left: 50%;
		-ms-transform: translate(-50%, -50%);
		transform: translate(-50%, -50%);
		font-size:64px;
		text-align:center;
	}
	canvas{
		background-color:#ddd;
	}
	</style>
</head>
<body oncontextmenu="return false;">
	<canvas id="c"></canvas>
	<p id="s"></p>
	<p id="p">Click to Begin</p>
	<script src="dots-engine.js?v=1"></script>
<!--<script>
var
canvas = document.getElementById("c"),
dimension = [document.documentElement.clientWidth, document.documentElement.clientHeight],
ctx = canvas.getContext("2d");
canvas.width = dimension[0];
canvas.height = dimension[1];
const
playerColor = "#922",
playerStartSize = 10,
spawnRate = 40,
enemyDMin = 0.1,
enemyDMax = 0.5;
var
enemyRadMin = 7,
enemyRadMax = playerStartSize+70,
highScore = localStorage.getItem('record')||0,
playerStartX = canvas.width / 2,
playerStartY = canvas.height / 2,
player = [playerStartX,playerStartY,playerStartSize,playerColor],
enemies = [],
spawnWait=0,
score=0,
paused=true;
onmousemove=function(){if(!paused){player[0]=event.x;player[1]=event.y}}
onkeydown=function(){if(event.key==" "){paused=!paused;document.getElementById("c").style.cursor=paused?"default":"none"}};
function spawnEnemy(){
	if(spawnWait<1){
		spawnWait=spawnRate;
		var x,
		y,
		dx=Math.random()*(enemyDMax-enemyDMin)+enemyDMin,
		dy=Math.random()*(enemyDMax-enemyDMin)+enemyDMin,
		size=Math.pow(Math.random()*(Math.sqrt(enemyRadMax)-Math.sqrt(enemyRadMin))+Math.sqrt(enemyRadMin),2);
		switch(Math.floor(Math.random()*4)){
			case 0:
				x=-size;
				y=Math.random()*canvas.height;
				dy=(y<canvas.height/2)?dy:-dy;
				break;
			case 1:
				x=canvas.width+size;
				y=Math.random()*canvas.height;
				dy=(y<canvas.height/2)?dy:-dy;
				dx=-dx;
				break;
			case 2:
				x=Math.random()*canvas.width;
				y=-size;
				dx=(x<canvas.width/2)?dx:-dx;
				break;
			case 3:
				x=Math.random()*canvas.width;
				y=canvas.height+size;
				dx=(x<canvas.width/2)?dx:-dx;
				dy=-dy;
				break;
		}
		enemies.push([x,y,size,"#"+Math.floor(Math.random()*4+6)+Math.floor(Math.random()*4+6)+Math.floor(Math.random()*4+6),dx,dy]);
	}
	spawnWait--;
}

function killEnemy(){
	for(var i=0;i<enemies.length;i++){
		enemies[i][0]+=enemies[i][4];
		enemies[i][1]+=enemies[i][5];
		if(enemies[i][0]+enemies[i][2]<0||enemies[i][0]-enemies[i][2]>canvas.width||enemies[i][1]+enemies[i][2]<0||enemies[i][1]-enemies[i][2]>canvas.height){enemies.splice(i,1)}
	}
}

function killPlayer(){
	for(var i=0;i<enemies.length;i++){
		if(Math.sqrt(Math.pow(Math.abs(player[0]-enemies[i][0]),2)+Math.pow(Math.abs(player[1]-enemies[i][1]),2))<enemies[i][2]+player[2]){
			if(player[2]>enemies[i][2]){
				player[2]=Math.sqrt(Math.pow(enemies[i][2],2)/6+Math.pow(player[2],2));
				enemies.splice(i,1);
				score++;
				enemyRadMax=player[2]+70;
			}
			else{
				if(score>highScore){localStorage.setItem('record', score)};
				document.getElementById("c").style.cursor="default";
				alert("you died!");
				document.location.reload();
				clearInterval(interval);
			}
		}
	}
}

function draw(){
	ctx.fillStyle="#ddd";
	ctx.fillRect(0,0,canvas.width,canvas.height);
	for(var i of enemies){drawCircle(i)}
	drawCircle(player);
	ctx.font="16px Arial";
	ctx.textAlign="left"
	ctx.fillStyle="#000";
	ctx.fillText("Score: "+score,20,30);
	ctx.fillText("Highscore: "+highScore,20,50);
	if(paused){ctx.font="64px Arial";ctx.textAlign="center"ctx.fillStyle="#000";ctx.fillText("PAUSED",canvas.width/2,canvas.height/2+22)}
}

function drawCircle(o){
	ctx.beginPath();
	ctx.arc(o[0],o[1],o[2],0,Math.PI*2);
	ctx.fillStyle=o[3];
	ctx.fill();
	ctx.closePath();
	ctx.font="bold 12px Arial";
	ctx.textAlign="center"
	ctx.fillStyle="#000";
	ctx.fillText(Math.round(o[2]),o[0],o[1]+5);
}

function m(){dimension=[document.documentElement.clientWidth,document.documentElement.clientHeight];canvas.width=dimension[0];canvas.height=dimension[1];ctx.clearRect(0,0,canvas.width,canvas.height);if(!paused){spawnEnemy();killEnemy();killPlayer()}draw()}
var interval=setInterval(m,1);
</script>-->
</body>
</html>